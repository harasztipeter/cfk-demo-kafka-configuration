{{- range $topic := .Values.topics }}
apiVersion: platform.confluent.io/v1beta1
kind: KafkaTopic
metadata:
  name: {{ $topic.name }}
  namespace: {{ $.Values.namespace }}
spec:
  partitionCount: {{ $topic.partitions }}
  replicas: {{ $topic.replicas }}
  configs:
    {{- range $key, $value := $topic.configs }}
      {{- if or (kindIs "int" $value) (kindIs "float64" $value) }}
        {{ $key }}: {{ printf "%.0f" $value | quote }}
      {{- else if or (kindIs "bool" $value) (eq $key "message.format.version")}}
        {{ $key }}: {{ quote $value }}
      {{- else }}
        {{ $key }}: {{ $value }}
      {{- end }}
    {{- end }}
  kafkaClusterRef:
    name: {{ $.Values.kafka.name }}
    namespace: {{ $.Values.namespace }}
---
{{- end }}